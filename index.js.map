{"version":3,"file":"index.js","sources":["../src/js/subscribe.js","../src/js/exercises.js","../src/js/main.js"],"sourcesContent":["import axios from 'axios';\n\ndocument\n  .getElementById('subscriptionForm')\n  .addEventListener('submit', async function (event) {\n    event.preventDefault();\n\n    const emailInput = event.target.email;\n    const email = emailInput.value;\n    if (!emailInput.checkValidity()) {\n      alert('Please enter a valid email address.');\n      return;\n    }\n\n    try {\n      const response = await axios.post(\n        'https://your-energy.b.goit.study/api/subscription',\n        {\n          email: email,\n        }\n      );\n\n      if (response.status === 201) {\n        alert(response.data.message);\n        emailInput.value = '';\n      }\n    } catch (error) {\n      if (error.response) {\n        if (error.response.status === 400) {\n          alert('Bad request: invalid request body.');\n        } else if (error.response.status === 404) {\n          alert('Not found: The endpoint could not be found.');\n        } else if (error.response.status === 409) {\n          alert('Subscription already exists.');\n        } else if (error.response.status === 500) {\n          alert('Server error: please try again later.');\n        }\n      } else {\n        alert('An unexpected error occurred. Please try again.');\n      }\n    }\n  });\n","import axios from 'axios';\nimport { initModalListeners } from './modal';\n\n// Loading data from API\nexport async function loadExercises(filter = 'Muscles', page = 1, limit = 12) {\n  try {\n    // Change coded space `%20` to usual space\n    const decodedFilter = filter.replace(/%20/g, ' ');\n\n    // API request\n    const response = await axios.get(\n      `https://your-energy.b.goit.study/api/filters`,\n      {\n        params: {\n          filter: decodedFilter,\n          page,\n          limit,\n        },\n      }\n    );\n\n    // Get results from response\n    const exercises = response.data.results;\n\n    // Use totalPages directly from response\n    const totalPages = response.data.totalPages;\n\n    // Data render\n    renderExercises(exercises);\n\n    // Pagination rendering\n    createPagination(totalPages, filter, limit, page); // Pass current page\n  } catch (error) {\n    console.error('Помилка при завантаженні даних:', error);\n  }\n}\n\n// Function for rendering data\nexport function renderExercises(exercises) {\n  const container = document.getElementById('exercises-container');\n  container.innerHTML = '';\n\n  exercises.forEach(exercise => {\n    const exerciseElement = document.createElement('div');\n    exerciseElement.classList.add('exercises-md-col-4');\n\n    exerciseElement.innerHTML = `\n      <div class=\"exercises__item\">\n        <img src=\"${exercise.imgURL}\" alt=\"Опис зображення\" />\n        <div class=\"text-overlay\">\n          <h5>${exercise.name}</h5>\n          <p>${exercise.filter}</p>\n        </div>\n      </div>\n    `;\n\n    exerciseElement.addEventListener('click', async () => {\n      const dataFilter = exercise.filter;\n      const dataName = exercise.name;\n\n      const data = await fetchExerciseDetailsPage(dataFilter, dataName, 1);\n      renderExerciseDetailsPage(data.results);\n      initModalListeners();\n    });\n\n    container.appendChild(exerciseElement);\n  });\n}\n\nfunction renderExerciseDetailsPage(exercises) {\n  const container = document.getElementById('exercises-container');\n  container.innerHTML = '';\n\n  exercises.forEach(exerciseDetail => {\n    const wrapperElement = document.createElement('div');\n    wrapperElement.classList.add('exercises-md-col-6');\n\n    const exerciseElement = document.createElement('div');\n    exerciseElement.classList.add('exercise-item');\n\n    exerciseElement.innerHTML = `\n      <div class=\"exercise-details__item\">\n        <div class=\"exercise-header\">\n          <button type=\"button\" class='btn-workout'>WORKOUT</button>\n          <div class=\"exercise-rating\">${\n            exerciseDetail.rating || 'Немає даних'\n          } <span>⭐</span></div>\n          <button type=\"button\" class=\"btn-start\" data-modal-open value=\"${\n            exerciseDetail._id\n          }\">Start ➔</button>\n        </div>\n        <h3 class=\"exercise-name\">${exerciseDetail.name}</h3>\n        <div class=\"exercise-info\">\n          <p class=\"truncate-text\"><strong class=\"exercise-info-title\">Burned calories:</strong> ${\n            exerciseDetail.burnedCalories\n          }</p>\n          <p class=\"truncate-text\"><strong class=\"exercise-info-title\">Body part:</strong> ${\n            exerciseDetail.bodyPart\n          }</p>\n          <p class=\"truncate-text\"><strong class=\"exercise-info-title\">Target:</strong> ${\n            exerciseDetail.target\n          }</p>\n        </div>\n      </div>\n    `;\n\n    wrapperElement.appendChild(exerciseElement);\n\n    container.appendChild(wrapperElement);\n  });\n}\n\nasync function fetchExerciseDetailsPage(filter, name, page = 1) {\n  let filterCamelCase = filter.toLowerCase().replace(/\\s+/g, '');\n\n  if (filterCamelCase.endsWith('ts')) {\n    filterCamelCase = filterCamelCase.slice(0, -1);\n  }\n\n  const encodedName = encodeURIComponent(name);\n\n  const url = `https://your-energy.b.goit.study/api/exercises?${filterCamelCase}=${encodedName}&page=${page}&limit=10`;\n\n  //console.log('Запитуваний URL:', url); // Лог для перевірки URL\n\n  try {\n    const response = await fetch(url);\n    if (!response.ok) throw new Error('Помилка завантаження даних');\n\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error('Помилка при запиті до API:', error);\n    return { results: [] };\n  }\n}\n\nexport function initializeFilters() {\n  const filterItems = document.querySelectorAll('.exercises-filters li');\n  filterItems.forEach(item => {\n    item.addEventListener('click', () => {\n      const selectedFilter = item.id;\n\n      // Clean container and using new filter\n      loadExercises(selectedFilter);\n\n      // Changing active filter class\n      document.querySelectorAll('.exercises-filters__selected').forEach(el => {\n        el.classList.remove('exercises-filters__selected');\n      });\n      item.classList.add('exercises-filters__selected');\n    });\n  });\n}\n\n// Create pagination based on total pages\nexport function createPagination(\n  totalPages,\n  filter,\n  limit = 12,\n  currentPage = 1\n) {\n  const paginationContainer = document.querySelector(\n    '.exercises-pagination ul'\n  );\n  paginationContainer.innerHTML = ''; // Clear pagination container\n\n  for (let i = 1; i <= totalPages; i++) {\n    const pageItem = document.createElement('li');\n    pageItem.textContent = i;\n\n    // Add class for the active page\n    if (i === currentPage) {\n      pageItem.classList.add('exercises-pagination__current');\n    }\n\n    // Add event listener for each page item\n    pageItem.addEventListener('click', () => {\n      // Update the class for the current page\n      document.querySelectorAll('.exercises-pagination li').forEach(li => {\n        li.classList.remove('exercises-pagination__current');\n      });\n      pageItem.classList.add('exercises-pagination__current');\n\n      // Load data for the selected page\n      loadExercises(filter, i, limit);\n    });\n\n    paginationContainer.appendChild(pageItem);\n  }\n}\n","import { loadExercises, initializeFilters } from './exercises.js';\n\n// Default init exercises\nloadExercises();\ninitializeFilters();\n"],"names":["event","emailInput","email","response","axios","error","loadExercises","filter","page","limit","decodedFilter","exercises","totalPages","renderExercises","createPagination","container","exercise","exerciseElement","dataFilter","dataName","data","fetchExerciseDetailsPage","renderExerciseDetailsPage","initModalListeners","exerciseDetail","wrapperElement","name","filterCamelCase","encodedName","url","initializeFilters","item","selectedFilter","el","currentPage","paginationContainer","pageItem","li"],"mappings":"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"}