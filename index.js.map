{"version":3,"file":"index.js","sources":["../src/js/modal.js","../src/js/subscribe.js","../src/js/exercises.js","../src/js/main.js"],"sourcesContent":["import iconsPath from '../img/icons/sprites.svg';\nimport { api } from './api';\nimport { getFavorites, addToFavorites, removeFromFavorites } from './storage';\n\nconst SELECTORS = {\n  closeModalButton: '[data-modal-close]',\n  modalContainer: '[data-modal]',\n  exerciseModal: '.modal',\n  ratingModal: '.add-rating-modal',\n  addToFavoritesButton: '.btn-modal-add-fav',\n  imgModalExercise: '.img-modal-exercise',\n  titleModal: '.title-modal',\n  ratingValue: '.rating-value',\n  statsList: '.stats-list',\n  descText: '.desc-text',\n  btnFavText: '.btn-fav-text',\n  iconFavBtnUse: '.icon-fav-btn-use',\n  openRatingModalButton: '[data-add-rating-open]',\n  closeRatingModalButton: '[data-add-rating-close]',\n  ratingForm: '.add-rating-form',\n  addRatingValue: '.add-rating-value',\n  iconModalRatingStar: '.icon-modal-rating-star',\n  addRatingRadioBtn: '.add-rating-radio-btn',\n  openModalButtons: '[data-modal-open]',\n  ratingStars: '.rating-stars',\n};\n\nconst CLASS_NAMES = {\n  visuallyHidden: 'visually-hidden',\n  favAdded: 'fav-added',\n  modalOpen: 'modal-open',\n  gold: 'gold',\n};\n\nconst closeModalButton = document.querySelector(SELECTORS.closeModalButton);\nconst modalContainer = document.querySelector(SELECTORS.modalContainer);\nconst exerciseModal = document.querySelector(SELECTORS.exerciseModal);\nconst ratingModal = document.querySelector(SELECTORS.ratingModal);\nconst addToFavoritesButton = document.querySelector(\n  SELECTORS.addToFavoritesButton\n);\n\nasync function loadModalData(exerciseId) {\n  const exerciseData = await api.exerciseInfo(exerciseId);\n  updateModalContent(exerciseData);\n  updateFavoriteButtonState(exerciseId);\n  addFavoriteButtonListener(exerciseId);\n\n  modalContainer.classList.toggle(CLASS_NAMES.visuallyHidden);\n  handleModalOpen();\n  initRatingForm(exerciseId);\n}\n\nfunction clearModalContent() {\n  document.querySelector(SELECTORS.imgModalExercise).src = '';\n  document.querySelector(SELECTORS.titleModal).textContent = '';\n  document.querySelector(SELECTORS.ratingValue).textContent = '0';\n  document.querySelector(SELECTORS.statsList).innerHTML = '';\n  document.querySelector(SELECTORS.descText).textContent = '';\n}\n\nfunction updateModalContent(exerciseData) {\n  clearModalContent();\n  document.querySelector(SELECTORS.imgModalExercise).src = exerciseData.gifUrl;\n  document.querySelector(SELECTORS.titleModal).textContent =\n    exerciseData.name.trim();\n  document.querySelector(SELECTORS.descText).textContent =\n    exerciseData.description.trim();\n  document.querySelector(SELECTORS.ratingValue).textContent =\n    exerciseData.rating;\n\n  updateStarRating(exerciseData.rating);\n  updateStats(exerciseData);\n}\n\nfunction updateStats(exerciseData) {\n  const statsList = document.querySelector(SELECTORS.statsList);\n  statsList.innerHTML = '';\n\n  let statsHTML = '';\n  if (exerciseData.target)\n    statsHTML += createStatItem('Target', exerciseData.target);\n  if (exerciseData.bodyPart)\n    statsHTML += createStatItem('BodyPart', exerciseData.bodyPart);\n  if (exerciseData.equipment)\n    statsHTML += createStatItem('Equipment', exerciseData.equipment);\n  if (exerciseData.popularity)\n    statsHTML += createStatItem('Popular', exerciseData.popularity);\n  if (exerciseData.burnedCalories)\n    statsHTML += createStatItem(\n      'Burned Calories',\n      `${exerciseData.burnedCalories}/${exerciseData.time} min`\n    );\n\n  statsList.insertAdjacentHTML('beforeend', statsHTML);\n}\n\nfunction createStatItem(title, value) {\n  return `<li class=\"stats-item\">\n    <p class=\"stats-title\">${title}</p>\n    <p class=\"stats-value\">${value}</p>\n  </li>`;\n}\n\nfunction updateFavoriteButtonState(exerciseId) {\n  const isFavorite = getFavorites().includes(exerciseId);\n  addToFavoritesButton.classList.toggle(CLASS_NAMES.favAdded, isFavorite);\n  document.querySelector(SELECTORS.btnFavText).textContent = isFavorite\n    ? 'Remove from favorites'\n    : 'Add to favorites';\n\n  document\n    .querySelector(SELECTORS.iconFavBtnUse)\n    .setAttribute('href', `${iconsPath}#${isFavorite ? 'trash-bin' : 'heart'}`);\n}\n\nfunction addFavoriteButtonListener(exerciseId) {\n  addToFavoritesButton.addEventListener('click', event => {\n    const button = event.currentTarget;\n    button.classList.toggle(CLASS_NAMES.favAdded);\n\n    if (button.classList.contains(CLASS_NAMES.favAdded)) {\n      addToFavorites(exerciseId);\n      updateFavoriteButtonState(exerciseId);\n    } else {\n      removeFromFavorites(exerciseId);\n      updateFavoriteButtonState(exerciseId);\n    }\n\n    event.stopImmediatePropagation();\n  });\n}\n\nfunction handleModalOpen() {\n  document.addEventListener('keydown', handleEscapeKey);\n  document.body.classList.add(CLASS_NAMES.modalOpen);\n}\n\nfunction handleModalClose() {\n  document.removeEventListener('keydown', handleEscapeKey);\n  document.body.classList.remove(CLASS_NAMES.modalOpen);\n}\n\nfunction handleEscapeKey(event) {\n  if (event.key === 'Escape') {\n    closeModal();\n  }\n}\n\nfunction closeModal() {\n  ratingModal.classList.add(CLASS_NAMES.visuallyHidden);\n  exerciseModal.classList.remove(CLASS_NAMES.visuallyHidden);\n  modalContainer.classList.add(CLASS_NAMES.visuallyHidden);\n  handleModalClose();\n}\n\ncloseModalButton.addEventListener('click', closeModal);\nmodalContainer.addEventListener('click', event => {\n  const isInModal =\n    checkTapInRect(event, exerciseModal.getBoundingClientRect()) ||\n    checkTapInRect(event, ratingModal.getBoundingClientRect());\n\n  if (!isInModal) closeModal();\n  event.stopImmediatePropagation();\n});\n\nfunction checkTapInRect(event, rect) {\n  return (\n    rect.top <= event.clientY &&\n    event.clientY <= rect.top + rect.height &&\n    rect.left <= event.clientX &&\n    event.clientX <= rect.left + rect.width\n  );\n}\n\nfunction initRatingForm(exerciseId) {\n  const openRatingModalButton = document.querySelector(\n    SELECTORS.openRatingModalButton\n  );\n  let selectedRating = 0;\n\n  openRatingModalButton.addEventListener('click', event => {\n    ratingModal.classList.remove(CLASS_NAMES.visuallyHidden);\n    exerciseModal.classList.add(CLASS_NAMES.visuallyHidden);\n    handleModalOpen();\n    loadRatingModal();\n    event.stopImmediatePropagation();\n  });\n\n  const closeRatingModalButton = document.querySelector(\n    SELECTORS.closeRatingModalButton\n  );\n  closeRatingModalButton.addEventListener('click', event => {\n    ratingModal.classList.add(CLASS_NAMES.visuallyHidden);\n    exerciseModal.classList.remove(CLASS_NAMES.visuallyHidden);\n    clearRatingForm(ratingModal.querySelector('form'));\n    event.stopImmediatePropagation();\n  });\n\n  function clearRatingForm(form) {\n    form.elements.email.value = '';\n    form.elements.comment.value = '';\n    form.elements.radio.forEach(radio => (radio.checked = false));\n    document.querySelector(SELECTORS.addRatingValue).textContent = '0';\n    document\n      .querySelectorAll(SELECTORS.iconModalRatingStar)\n      .forEach(star => star.classList.remove(CLASS_NAMES.gold));\n  }\n\n  function loadRatingModal() {\n    const ratingRadioButtons = document.querySelectorAll(\n      SELECTORS.addRatingRadioBtn\n    );\n\n    ratingRadioButtons.forEach(button => {\n      button.addEventListener('click', event => {\n        selectedRating = Number(event.currentTarget.value);\n        document.querySelector(SELECTORS.addRatingValue).textContent =\n          selectedRating;\n        document\n          .querySelectorAll(SELECTORS.iconModalRatingStar)\n          .forEach((star, index) => {\n            star.classList.toggle(CLASS_NAMES.gold, index < selectedRating);\n          });\n        event.stopImmediatePropagation();\n      });\n    });\n  }\n\n  const ratingForm = document.querySelector(SELECTORS.ratingForm);\n  ratingForm.addEventListener('submit', async event => {\n    event.preventDefault();\n\n    const form = event.target;\n    const email = form.elements.email.value;\n    const review = form.elements.comment.value;\n\n    if (!selectedRating) {\n      alert('Choose your rating');\n    } else if (!email) {\n      alert('Enter your email');\n    } else if (!review) {\n      alert('Leave a comment');\n    } else {\n      try {\n        const nextExercise = await api.setExerciseRating({\n          exerciseId,\n          rate: selectedRating,\n          email,\n          review,\n        });\n        ratingModal.classList.add(CLASS_NAMES.visuallyHidden);\n        clearRatingForm(form);\n        exerciseModal.classList.remove(CLASS_NAMES.visuallyHidden);\n        updateModalContent(nextExercise);\n      } catch (error) {\n        alert(`Error: ${error.message}`);\n      }\n    }\n    event.stopImmediatePropagation();\n  });\n}\n\n// Open Modal\nexport function initModalListeners() {\n  const openModalButtons = document.querySelectorAll(\n    SELECTORS.openModalButtons\n  );\n  openModalButtons.forEach(button => {\n    button.addEventListener('click', event => {\n      const exerciseId = event.currentTarget.value;\n      loadModalData(exerciseId);\n    });\n  });\n}\n\nfunction updateStarRating(rating) {\n  const starContainer = document.querySelector(SELECTORS.ratingStars);\n  starContainer.innerHTML = '';\n  starContainer.append(...addStars(5, rating));\n}\n\nfunction addStars(starsCount, rating) {\n  const elements = [];\n  for (let i = 0; i < starsCount; i++) {\n    const percent = Math.min(100, Math.max(0, (rating - i) * 100));\n\n    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    svg.setAttribute('width', '18');\n    svg.setAttribute('height', '18');\n    svg.setAttribute('class', 'icon icon-modal-star');\n\n    const gradientId = `gradient-${i}-${percent}`;\n    svg.innerHTML = `\n      <defs>\n        <linearGradient id=\"${gradientId}\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n          <stop offset=\"${percent}%\" stop-color=\"var(--color-accent)\" />\n          <stop offset=\"${percent}%\" stop-color=\"var(--color-rating)\" />\n        </linearGradient>\n      </defs>\n      <use href=\"${iconsPath}#star\" fill=\"url(#${gradientId})\"></use>\n    `;\n\n    elements.push(svg);\n  }\n\n  return elements;\n}\n","import axios from 'axios';\n\ndocument\n  .getElementById('subscriptionForm')\n  .addEventListener('submit', async function (event) {\n    event.preventDefault();\n\n    const emailInput = event.target.email;\n    const email = emailInput.value;\n    if (!emailInput.checkValidity()) {\n      alert('Please enter a valid email address.');\n      return;\n    }\n\n    try {\n      const response = await axios.post(\n        'https://your-energy.b.goit.study/api/subscription',\n        {\n          email: email,\n        }\n      );\n\n      if (response.status === 201) {\n        alert(response.data.message);\n        emailInput.value = '';\n      }\n    } catch (error) {\n      if (error.response) {\n        if (error.response.status === 400) {\n          alert('Bad request: invalid request body.');\n        } else if (error.response.status === 404) {\n          alert('Not found: The endpoint could not be found.');\n        } else if (error.response.status === 409) {\n          alert('Subscription already exists.');\n        } else if (error.response.status === 500) {\n          alert('Server error: please try again later.');\n        }\n      } else {\n        alert('An unexpected error occurred. Please try again.');\n      }\n    }\n  });\n","import axios from 'axios';\nimport { initModalListeners } from './modal';\n\n// Loading data from API\nexport async function loadExercises(filter = 'Muscles', page = 1, limit = 12) {\n  try {\n    // Change coded space `%20` to usual space\n    const decodedFilter = filter.replace(/%20/g, ' ');\n\n    // API request\n    const response = await axios.get(\n      `https://your-energy.b.goit.study/api/filters`,\n      {\n        params: {\n          filter: decodedFilter,\n          page,\n          limit,\n        },\n      }\n    );\n\n    // Get results from response\n    const exercises = response.data.results;\n\n    // Use totalPages directly from response\n    const totalPages = response.data.totalPages;\n\n    // Data render\n    renderExercises(exercises);\n\n    // Pagination rendering\n    createPagination(totalPages, filter, limit, page); // Pass current page\n  } catch (error) {\n    console.error('Помилка при завантаженні даних:', error);\n  }\n}\n\n// Function for rendering data\nexport function renderExercises(exercises) {\n  const container = document.getElementById('exercises-container');\n  container.innerHTML = '';\n\n  exercises.forEach(exercise => {\n    const exerciseElement = document.createElement('div');\n    exerciseElement.classList.add('exercises-md-col-4');\n\n    exerciseElement.innerHTML = `\n      <div class=\"exercises__item\">\n        <img src=\"${exercise.imgURL}\" alt=\"Опис зображення\" />\n        <div class=\"text-overlay\">\n          <h5>${exercise.name}</h5>\n          <p>${exercise.filter}</p>\n        </div>\n      </div>\n    `;\n\n    exerciseElement.addEventListener('click', async () => {\n      const dataFilter = exercise.filter;\n      const dataName = exercise.name;\n\n      const data = await fetchExerciseDetailsPage(dataFilter, dataName, 1);\n      renderExerciseDetailsPage(data.results);\n      initModalListeners();\n    });\n\n    container.appendChild(exerciseElement);\n  });\n}\n\nfunction renderExerciseDetailsPage(exercises) {\n  const container = document.getElementById('exercises-container');\n  container.innerHTML = '';\n\n  exercises.forEach(exerciseDetail => {\n    const exerciseElement = document.createElement('li');\n    exerciseElement.classList.add('exercise-item');\n    exerciseElement.innerHTML = `\n      <div class=\"exercise-details__item\">\n        <div class=\"exercise-header\">\n          <button type=\"button\" class='btn-workout'>WORKOUT</button>\n          <div class=\"exercise-rating\">${\n            exerciseDetail.rating || 'Немає даних'\n          } <span>⭐</span></div>\n          <button type=\"button\" class=\"btn-start\" data-modal-open value=\"${\n            exerciseDetail._id\n          }\">Start ➔</button>\n        </div>\n        <h3 class=\"exercise-name\">${exerciseDetail.name}</h3>\n        <div class=\"exercise-info\">\n          <p class=\"truncate-text\"<strong class=\"exercise-info-title\">Burned calories:</strong> ${\n            exerciseDetail.burnedCalories\n          }</p>\n          <p class=\"truncate-text\"><strong class=\"exercise-info-title\">Body part:</strong> ${\n            exerciseDetail.bodyPart\n          }</p>\n          <p class=\"truncate-text\"><strong class=\"exercise-info-title\">Target:</strong> ${\n            exerciseDetail.target\n          }</p>\n        </div>\n      </div>\n    `;\n    container.appendChild(exerciseElement);\n  });\n}\n\nasync function fetchExerciseDetailsPage(filter, name, page = 1) {\n  let filterCamelCase = filter.toLowerCase().replace(/\\s+/g, '');\n\n  if (filterCamelCase.endsWith('ts')) {\n    filterCamelCase = filterCamelCase.slice(0, -1);\n  }\n\n  const encodedName = encodeURIComponent(name);\n\n  const url = `https://your-energy.b.goit.study/api/exercises?${filterCamelCase}=${encodedName}&page=${page}&limit=10`;\n\n  //console.log('Запитуваний URL:', url); // Лог для перевірки URL\n\n  try {\n    const response = await fetch(url);\n    if (!response.ok) throw new Error('Помилка завантаження даних');\n\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error('Помилка при запиті до API:', error);\n    return { results: [] };\n  }\n}\n\nexport function initializeFilters() {\n  const filterItems = document.querySelectorAll('.exercises-filters li');\n  filterItems.forEach(item => {\n    item.addEventListener('click', () => {\n      const selectedFilter = item.id;\n\n      // Clean container and using new filter\n      loadExercises(selectedFilter);\n\n      // Changing active filter class\n      document.querySelectorAll('.exercises-filters__selected').forEach(el => {\n        el.classList.remove('exercises-filters__selected');\n      });\n      item.classList.add('exercises-filters__selected');\n    });\n  });\n}\n\n// Create pagination based on total pages\nexport function createPagination(\n  totalPages,\n  filter,\n  limit = 12,\n  currentPage = 1\n) {\n  const paginationContainer = document.querySelector(\n    '.exercises-pagination ul'\n  );\n  paginationContainer.innerHTML = ''; // Clear pagination container\n\n  for (let i = 1; i <= totalPages; i++) {\n    const pageItem = document.createElement('li');\n    pageItem.textContent = i;\n\n    // Add class for the active page\n    if (i === currentPage) {\n      pageItem.classList.add('exercises-pagination__current');\n    }\n\n    // Add event listener for each page item\n    pageItem.addEventListener('click', () => {\n      // Update the class for the current page\n      document.querySelectorAll('.exercises-pagination li').forEach(li => {\n        li.classList.remove('exercises-pagination__current');\n      });\n      pageItem.classList.add('exercises-pagination__current');\n\n      // Load data for the selected page\n      loadExercises(filter, i, limit);\n    });\n\n    paginationContainer.appendChild(pageItem);\n  }\n}\n","import { loadExercises, initializeFilters } from './exercises.js';\n\n// Default init exercises\nloadExercises();\ninitializeFilters();\n"],"names":["SELECTORS","CLASS_NAMES","closeModalButton","modalContainer","exerciseModal","ratingModal","addToFavoritesButton","loadModalData","exerciseId","exerciseData","api","updateModalContent","updateFavoriteButtonState","addFavoriteButtonListener","handleModalOpen","initRatingForm","clearModalContent","updateStarRating","updateStats","statsList","statsHTML","createStatItem","title","value","isFavorite","getFavorites","iconsPath","event","button","addToFavorites","removeFromFavorites","handleEscapeKey","handleModalClose","closeModal","checkTapInRect","rect","openRatingModalButton","selectedRating","loadRatingModal","clearRatingForm","form","radio","star","index","email","review","nextExercise","error","initModalListeners","rating","starContainer","addStars","starsCount","elements","i","percent","svg","gradientId","emailInput","response","axios","loadExercises","filter","page","limit","decodedFilter","exercises","totalPages","renderExercises","createPagination","container","exercise","exerciseElement","dataFilter","dataName","data","fetchExerciseDetailsPage","renderExerciseDetailsPage","exerciseDetail","name","filterCamelCase","encodedName","url","initializeFilters","item","selectedFilter","el","currentPage","paginationContainer","pageItem","li"],"mappings":"yHAIA,MAAMA,EAAY,CAChB,iBAAkB,qBAClB,eAAgB,eAChB,cAAe,SACf,YAAa,oBACb,qBAAsB,qBACtB,iBAAkB,sBAClB,WAAY,eACZ,YAAa,gBACb,UAAW,cACX,SAAU,aACV,WAAY,gBACZ,cAAe,oBACf,sBAAuB,yBACvB,uBAAwB,0BACxB,WAAY,mBACZ,eAAgB,oBAChB,oBAAqB,0BACrB,kBAAmB,wBACnB,iBAAkB,oBAClB,YAAa,eACf,EAEMC,EAAc,CAClB,eAAgB,kBAChB,SAAU,YACV,UAAW,aACX,KAAM,MACR,EAEMC,EAAmB,SAAS,cAAcF,EAAU,gBAAgB,EACpEG,EAAiB,SAAS,cAAcH,EAAU,cAAc,EAChEI,EAAgB,SAAS,cAAcJ,EAAU,aAAa,EAC9DK,EAAc,SAAS,cAAcL,EAAU,WAAW,EAC1DM,EAAuB,SAAS,cACpCN,EAAU,oBACZ,EAEA,eAAeO,EAAcC,EAAY,CACvC,MAAMC,EAAe,MAAMC,EAAI,aAAaF,CAAU,EACtDG,EAAmBF,CAAY,EAC/BG,EAA0BJ,CAAU,EACpCK,EAA0BL,CAAU,EAEpCL,EAAe,UAAU,OAAOF,EAAY,cAAc,EAC1Da,IACAC,EAAeP,CAAU,CAC3B,CAEA,SAASQ,GAAoB,CAC3B,SAAS,cAAchB,EAAU,gBAAgB,EAAE,IAAM,GACzD,SAAS,cAAcA,EAAU,UAAU,EAAE,YAAc,GAC3D,SAAS,cAAcA,EAAU,WAAW,EAAE,YAAc,IAC5D,SAAS,cAAcA,EAAU,SAAS,EAAE,UAAY,GACxD,SAAS,cAAcA,EAAU,QAAQ,EAAE,YAAc,EAC3D,CAEA,SAASW,EAAmBF,EAAc,CACxCO,IACA,SAAS,cAAchB,EAAU,gBAAgB,EAAE,IAAMS,EAAa,OACtE,SAAS,cAAcT,EAAU,UAAU,EAAE,YAC3CS,EAAa,KAAK,OACpB,SAAS,cAAcT,EAAU,QAAQ,EAAE,YACzCS,EAAa,YAAY,OAC3B,SAAS,cAAcT,EAAU,WAAW,EAAE,YAC5CS,EAAa,OAEfQ,EAAiBR,EAAa,MAAM,EACpCS,EAAYT,CAAY,CAC1B,CAEA,SAASS,EAAYT,EAAc,CACjC,MAAMU,EAAY,SAAS,cAAcnB,EAAU,SAAS,EAC5DmB,EAAU,UAAY,GAEtB,IAAIC,EAAY,GACZX,EAAa,SACfW,GAAaC,EAAe,SAAUZ,EAAa,MAAM,GACvDA,EAAa,WACfW,GAAaC,EAAe,WAAYZ,EAAa,QAAQ,GAC3DA,EAAa,YACfW,GAAaC,EAAe,YAAaZ,EAAa,SAAS,GAC7DA,EAAa,aACfW,GAAaC,EAAe,UAAWZ,EAAa,UAAU,GAC5DA,EAAa,iBACfW,GAAaC,EACX,kBACA,GAAGZ,EAAa,cAAc,IAAIA,EAAa,IAAI,MACzD,GAEEU,EAAU,mBAAmB,YAAaC,CAAS,CACrD,CAEA,SAASC,EAAeC,EAAOC,EAAO,CACpC,MAAO;AAAA,6BACoBD,CAAK;AAAA,6BACLC,CAAK;AAAA,QAElC,CAEA,SAASX,EAA0BJ,EAAY,CAC7C,MAAMgB,EAAaC,EAAY,EAAG,SAASjB,CAAU,EACrDF,EAAqB,UAAU,OAAOL,EAAY,SAAUuB,CAAU,EACtE,SAAS,cAAcxB,EAAU,UAAU,EAAE,YAAcwB,EACvD,wBACA,mBAEJ,SACG,cAAcxB,EAAU,aAAa,EACrC,aAAa,OAAQ,GAAG0B,CAAS,IAAIF,EAAa,YAAc,OAAO,EAAE,CAC9E,CAEA,SAASX,EAA0BL,EAAY,CAC7CF,EAAqB,iBAAiB,QAASqB,GAAS,CACtD,MAAMC,EAASD,EAAM,cACrBC,EAAO,UAAU,OAAO3B,EAAY,QAAQ,EAExC2B,EAAO,UAAU,SAAS3B,EAAY,QAAQ,GAChD4B,EAAerB,CAAU,EACzBI,EAA0BJ,CAAU,IAEpCsB,EAAoBtB,CAAU,EAC9BI,EAA0BJ,CAAU,GAGtCmB,EAAM,yBAAwB,CAClC,CAAG,CACH,CAEA,SAASb,GAAkB,CACzB,SAAS,iBAAiB,UAAWiB,CAAe,EACpD,SAAS,KAAK,UAAU,IAAI9B,EAAY,SAAS,CACnD,CAEA,SAAS+B,GAAmB,CAC1B,SAAS,oBAAoB,UAAWD,CAAe,EACvD,SAAS,KAAK,UAAU,OAAO9B,EAAY,SAAS,CACtD,CAEA,SAAS8B,EAAgBJ,EAAO,CAC1BA,EAAM,MAAQ,UAChBM,GAEJ,CAEA,SAASA,GAAa,CACpB5B,EAAY,UAAU,IAAIJ,EAAY,cAAc,EACpDG,EAAc,UAAU,OAAOH,EAAY,cAAc,EACzDE,EAAe,UAAU,IAAIF,EAAY,cAAc,EACvD+B,GACF,CAEA9B,EAAiB,iBAAiB,QAAS+B,CAAU,EACrD9B,EAAe,iBAAiB,QAASwB,GAAS,CAE9CO,EAAeP,EAAOvB,EAAc,uBAAuB,GAC3D8B,EAAeP,EAAOtB,EAAY,sBAAuB,CAAA,GAE3C4B,IAChBN,EAAM,yBAAwB,CAChC,CAAC,EAED,SAASO,EAAeP,EAAOQ,EAAM,CACnC,OACEA,EAAK,KAAOR,EAAM,SAClBA,EAAM,SAAWQ,EAAK,IAAMA,EAAK,QACjCA,EAAK,MAAQR,EAAM,SACnBA,EAAM,SAAWQ,EAAK,KAAOA,EAAK,KAEtC,CAEA,SAASpB,EAAeP,EAAY,CAClC,MAAM4B,EAAwB,SAAS,cACrCpC,EAAU,qBACd,EACE,IAAIqC,EAAiB,EAErBD,EAAsB,iBAAiB,QAAST,GAAS,CACvDtB,EAAY,UAAU,OAAOJ,EAAY,cAAc,EACvDG,EAAc,UAAU,IAAIH,EAAY,cAAc,EACtDa,IACAwB,IACAX,EAAM,yBAAwB,CAClC,CAAG,EAE8B,SAAS,cACtC3B,EAAU,sBACd,EACyB,iBAAiB,QAAS2B,GAAS,CACxDtB,EAAY,UAAU,IAAIJ,EAAY,cAAc,EACpDG,EAAc,UAAU,OAAOH,EAAY,cAAc,EACzDsC,EAAgBlC,EAAY,cAAc,MAAM,CAAC,EACjDsB,EAAM,yBAAwB,CAClC,CAAG,EAED,SAASY,EAAgBC,EAAM,CAC7BA,EAAK,SAAS,MAAM,MAAQ,GAC5BA,EAAK,SAAS,QAAQ,MAAQ,GAC9BA,EAAK,SAAS,MAAM,QAAQC,GAAUA,EAAM,QAAU,EAAM,EAC5D,SAAS,cAAczC,EAAU,cAAc,EAAE,YAAc,IAC/D,SACG,iBAAiBA,EAAU,mBAAmB,EAC9C,QAAQ0C,GAAQA,EAAK,UAAU,OAAOzC,EAAY,IAAI,CAAC,CAC3D,CAED,SAASqC,GAAkB,CACE,SAAS,iBAClCtC,EAAU,iBAChB,EAEuB,QAAQ4B,GAAU,CACnCA,EAAO,iBAAiB,QAASD,GAAS,CACxCU,EAAiB,OAAOV,EAAM,cAAc,KAAK,EACjD,SAAS,cAAc3B,EAAU,cAAc,EAAE,YAC/CqC,EACF,SACG,iBAAiBrC,EAAU,mBAAmB,EAC9C,QAAQ,CAAC0C,EAAMC,IAAU,CACxBD,EAAK,UAAU,OAAOzC,EAAY,KAAM0C,EAAQN,CAAc,CAC1E,CAAW,EACHV,EAAM,yBAAwB,CACtC,CAAO,CACP,CAAK,CACF,CAEkB,SAAS,cAAc3B,EAAU,UAAU,EACnD,iBAAiB,SAAU,MAAM2B,GAAS,CACnDA,EAAM,eAAc,EAEpB,MAAMa,EAAOb,EAAM,OACbiB,EAAQJ,EAAK,SAAS,MAAM,MAC5BK,EAASL,EAAK,SAAS,QAAQ,MAErC,GAAI,CAACH,EACH,MAAM,oBAAoB,UACjB,CAACO,EACV,MAAM,kBAAkB,UACf,CAACC,EACV,MAAM,iBAAiB,MAEvB,IAAI,CACF,MAAMC,EAAe,MAAMpC,EAAI,kBAAkB,CAC/C,WAAAF,EACA,KAAM6B,EACN,MAAAO,EACA,OAAAC,CACV,CAAS,EACDxC,EAAY,UAAU,IAAIJ,EAAY,cAAc,EACpDsC,EAAgBC,CAAI,EACpBpC,EAAc,UAAU,OAAOH,EAAY,cAAc,EACzDU,EAAmBmC,CAAY,CAChC,OAAQC,EAAO,CACd,MAAM,UAAUA,EAAM,OAAO,EAAE,CAChC,CAEHpB,EAAM,yBAAwB,CAClC,CAAG,CACH,CAGO,SAASqB,GAAqB,CACV,SAAS,iBAChChD,EAAU,gBACd,EACmB,QAAQ4B,GAAU,CACjCA,EAAO,iBAAiB,QAASD,GAAS,CACxC,MAAMnB,EAAamB,EAAM,cAAc,MACvCpB,EAAcC,CAAU,CAC9B,CAAK,CACL,CAAG,CACH,CAEA,SAASS,EAAiBgC,EAAQ,CAChC,MAAMC,EAAgB,SAAS,cAAclD,EAAU,WAAW,EAClEkD,EAAc,UAAY,GAC1BA,EAAc,OAAO,GAAGC,EAAS,EAAGF,CAAM,CAAC,CAC7C,CAEA,SAASE,EAASC,EAAYH,EAAQ,CACpC,MAAMI,EAAW,CAAA,EACjB,QAASC,EAAI,EAAGA,EAAIF,EAAYE,IAAK,CACnC,MAAMC,EAAU,KAAK,IAAI,IAAK,KAAK,IAAI,GAAIN,EAASK,GAAK,GAAG,CAAC,EAEvDE,EAAM,SAAS,gBAAgB,6BAA8B,KAAK,EACxEA,EAAI,aAAa,QAAS,IAAI,EAC9BA,EAAI,aAAa,SAAU,IAAI,EAC/BA,EAAI,aAAa,QAAS,sBAAsB,EAEhD,MAAMC,EAAa,YAAYH,CAAC,IAAIC,CAAO,GAC3CC,EAAI,UAAY;AAAA;AAAA,8BAEUC,CAAU;AAAA,0BACdF,CAAO;AAAA,0BACPA,CAAO;AAAA;AAAA;AAAA,mBAGd7B,CAAS,qBAAqB+B,CAAU;AAAA,MAGvDJ,EAAS,KAAKG,CAAG,CAClB,CAED,OAAOH,CACT,CCjTA,SACG,eAAe,kBAAkB,EACjC,iBAAiB,SAAU,eAAgB1B,EAAO,CACjDA,EAAM,eAAc,EAEpB,MAAM+B,EAAa/B,EAAM,OAAO,MAC1BiB,EAAQc,EAAW,MACzB,GAAI,CAACA,EAAW,gBAAiB,CAC/B,MAAM,qCAAqC,EAC3C,MACD,CAED,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAM,KAC3B,oDACA,CACE,MAAOhB,CACR,CACT,EAEUe,EAAS,SAAW,MACtB,MAAMA,EAAS,KAAK,OAAO,EAC3BD,EAAW,MAAQ,GAEtB,OAAQX,EAAO,CACVA,EAAM,SACJA,EAAM,SAAS,SAAW,IAC5B,MAAM,oCAAoC,EACjCA,EAAM,SAAS,SAAW,IACnC,MAAM,6CAA6C,EAC1CA,EAAM,SAAS,SAAW,IACnC,MAAM,8BAA8B,EAC3BA,EAAM,SAAS,SAAW,KACnC,MAAM,uCAAuC,EAG/C,MAAM,iDAAiD,CAE1D,CACL,CAAG,ECrCI,eAAec,EAAcC,EAAS,UAAWC,EAAO,EAAGC,EAAQ,GAAI,CAC5E,GAAI,CAEF,MAAMC,EAAgBH,EAAO,QAAQ,OAAQ,GAAG,EAG1CH,EAAW,MAAMC,EAAM,IAC3B,+CACA,CACE,OAAQ,CACN,OAAQK,EACR,KAAAF,EACA,MAAAC,CACD,CACF,CACP,EAGUE,EAAYP,EAAS,KAAK,QAG1BQ,EAAaR,EAAS,KAAK,WAGjCS,EAAgBF,CAAS,EAGzBG,EAAiBF,EAAYL,EAAQE,EAAOD,CAAI,CACjD,OAAQhB,EAAO,CACd,QAAQ,MAAM,kCAAmCA,CAAK,CACvD,CACH,CAGO,SAASqB,EAAgBF,EAAW,CACzC,MAAMI,EAAY,SAAS,eAAe,qBAAqB,EAC/DA,EAAU,UAAY,GAEtBJ,EAAU,QAAQK,GAAY,CAC5B,MAAMC,EAAkB,SAAS,cAAc,KAAK,EACpDA,EAAgB,UAAU,IAAI,oBAAoB,EAElDA,EAAgB,UAAY;AAAA;AAAA,oBAEZD,EAAS,MAAM;AAAA;AAAA,gBAEnBA,EAAS,IAAI;AAAA,eACdA,EAAS,MAAM;AAAA;AAAA;AAAA,MAK1BC,EAAgB,iBAAiB,QAAS,SAAY,CACpD,MAAMC,EAAaF,EAAS,OACtBG,EAAWH,EAAS,KAEpBI,EAAO,MAAMC,EAAyBH,EAAYC,EAAU,CAAC,EACnEG,EAA0BF,EAAK,OAAO,EACtC3B,GACN,CAAK,EAEDsB,EAAU,YAAYE,CAAe,CACzC,CAAG,CACH,CAEA,SAASK,EAA0BX,EAAW,CAC5C,MAAMI,EAAY,SAAS,eAAe,qBAAqB,EAC/DA,EAAU,UAAY,GAEtBJ,EAAU,QAAQY,GAAkB,CAClC,MAAMN,EAAkB,SAAS,cAAc,IAAI,EACnDA,EAAgB,UAAU,IAAI,eAAe,EAC7CA,EAAgB,UAAY;AAAA;AAAA;AAAA;AAAA,yCAKpBM,EAAe,QAAU,aAC1B;AAAA,2EAECA,EAAe,GAChB;AAAA;AAAA,oCAEyBA,EAAe,IAAI;AAAA;AAAA,kGAG3CA,EAAe,cAChB;AAAA,6FAECA,EAAe,QAChB;AAAA,0FAECA,EAAe,MAChB;AAAA;AAAA;AAAA,MAIPR,EAAU,YAAYE,CAAe,CACzC,CAAG,CACH,CAEA,eAAeI,EAAyBd,EAAQiB,EAAMhB,EAAO,EAAG,CAC9D,IAAIiB,EAAkBlB,EAAO,YAAW,EAAG,QAAQ,OAAQ,EAAE,EAEzDkB,EAAgB,SAAS,IAAI,IAC/BA,EAAkBA,EAAgB,MAAM,EAAG,EAAE,GAG/C,MAAMC,EAAc,mBAAmBF,CAAI,EAErCG,EAAM,kDAAkDF,CAAe,IAAIC,CAAW,SAASlB,CAAI,YAIzG,GAAI,CACF,MAAMJ,EAAW,MAAM,MAAMuB,CAAG,EAChC,GAAI,CAACvB,EAAS,GAAI,MAAM,IAAI,MAAM,4BAA4B,EAG9D,OADa,MAAMA,EAAS,MAE7B,OAAQZ,EAAO,CACd,eAAQ,MAAM,6BAA8BA,CAAK,EAC1C,CAAE,QAAS,CAAA,EACnB,CACH,CAEO,SAASoC,GAAoB,CACd,SAAS,iBAAiB,uBAAuB,EACzD,QAAQC,GAAQ,CAC1BA,EAAK,iBAAiB,QAAS,IAAM,CACnC,MAAMC,EAAiBD,EAAK,GAG5BvB,EAAcwB,CAAc,EAG5B,SAAS,iBAAiB,8BAA8B,EAAE,QAAQC,GAAM,CACtEA,EAAG,UAAU,OAAO,6BAA6B,CACzD,CAAO,EACDF,EAAK,UAAU,IAAI,6BAA6B,CACtD,CAAK,CACL,CAAG,CACH,CAGO,SAASf,EACdF,EACAL,EACAE,EAAQ,GACRuB,EAAc,EACd,CACA,MAAMC,EAAsB,SAAS,cACnC,0BACJ,EACEA,EAAoB,UAAY,GAEhC,QAASlC,EAAI,EAAGA,GAAKa,EAAYb,IAAK,CACpC,MAAMmC,EAAW,SAAS,cAAc,IAAI,EAC5CA,EAAS,YAAcnC,EAGnBA,IAAMiC,GACRE,EAAS,UAAU,IAAI,+BAA+B,EAIxDA,EAAS,iBAAiB,QAAS,IAAM,CAEvC,SAAS,iBAAiB,0BAA0B,EAAE,QAAQC,GAAM,CAClEA,EAAG,UAAU,OAAO,+BAA+B,CAC3D,CAAO,EACDD,EAAS,UAAU,IAAI,+BAA+B,EAGtD5B,EAAcC,EAAQR,EAAGU,CAAK,CACpC,CAAK,EAEDwB,EAAoB,YAAYC,CAAQ,CACzC,CACH,CCpLA5B,IACAsB,EAAmB"}