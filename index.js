var B=t=>{throw TypeError(t)};var E=(t,e,o)=>e.has(t)||B("Cannot "+o);var R=(t,e,o)=>(E(t,e,"read from private field"),o?o.call(t):e.get(t)),S=(t,e,o)=>e.has(t)?B("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,o);var b=(t,e,o)=>(E(t,e,"access private method"),o);/* empty css                      */import{a as x}from"./assets/vendor-CNNbG8jS.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))d(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&d(i)}).observe(document,{childList:!0,subtree:!0});function o(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function d(a){if(a.ep)return;a.ep=!0;const r=o(a);fetch(a.href,r)}})();const C="/assets/sprites-ngjth3YH.svg";var p,y,F;class ${constructor(){S(this,y);S(this,p,x.create({baseURL:"https://your-energy.b.goit.study/api/"}))}async exerciseInfo(e){return b(this,y,F).call(this,`exercises/${e}`)}}p=new WeakMap,y=new WeakSet,F=async function(e){return(await R(this,p).get(e)).data};const O=new $,n={closeModalButton:"[data-modal-close]",modalContainer:"[data-modal]",exerciseModal:".modal",ratingModal:".add-rating-modal",addToFavoritesButton:".btn-modal-add-fav",imgModalExercise:".img-modal-exercise",titleModal:".title-modal",ratingValue:".rating-value",statsList:".stats-list",descText:".desc-text",btnFavText:".btn-fav-text",iconFavBtnUse:".icon-fav-btn-use",openRatingModalButton:"[data-add-rating-open]",closeRatingModalButton:"[data-add-rating-close]",ratingForm:".add-rating-form",addRatingValue:".add-rating-value",iconModalRatingStar:".icon-modal-rating-star",addRatingRadioBtn:".add-rating-radio-btn",openModalButtons:"[data-modal-open]",ratingStars:".rating-stars"},s={visuallyHidden:"visually-hidden",favAdded:"fav-added",modalOpen:"modal-open",gold:"gold"},P=document.querySelector(n.closeModalButton),L=document.querySelector(n.modalContainer),g=document.querySelector(n.exerciseModal),m=document.querySelector(n.ratingModal),T=document.querySelector(n.addToFavoritesButton);async function w(t){const e=await O.exerciseInfo(t);N(e),M(t),V(t),L.classList.toggle(s.visuallyHidden),A(),J()}function I(){document.querySelector(n.imgModalExercise).src="",document.querySelector(n.titleModal).textContent="",document.querySelector(n.ratingValue).textContent="0",document.querySelector(n.statsList).innerHTML="",document.querySelector(n.descText).textContent=""}function N(t){I(),document.querySelector(n.imgModalExercise).src=t.gifUrl,document.querySelector(n.titleModal).textContent=t.name.trim(),document.querySelector(n.descText).textContent=t.description.trim(),document.querySelector(n.ratingValue).textContent=t.rating,K(t.rating),k(t)}function k(t){const e=document.querySelector(n.statsList);e.innerHTML="";let o="";t.target&&(o+=u("Target",t.target)),t.bodyPart&&(o+=u("BodyPart",t.bodyPart)),t.equipment&&(o+=u("Equipment",t.equipment)),t.popularity&&(o+=u("Popular",t.popularity)),t.burnedCalories&&(o+=u("Burned Calories",`${t.burnedCalories}/${t.time} min`)),e.insertAdjacentHTML("beforeend",o)}function u(t,e){return`<li class="stats-item">
    <p class="stats-title">${t}</p>
    <p class="stats-value">${e}</p>
  </li>`}function M(t){const e=q().includes(t);T.classList.toggle(s.favAdded,e),document.querySelector(n.btnFavText).textContent=e?"Remove from favorites":"Add to favorites",document.querySelector(n.iconFavBtnUse).setAttribute("href",`${C}#${e?"trash-bin":"heart"}`)}function V(t){T.addEventListener("click",e=>{const o=e.currentTarget;o.classList.toggle(s.favAdded),o.classList.contains(s.favAdded)?(j(t),M(t)):(G(t),M(t)),e.stopImmediatePropagation()})}function A(){document.addEventListener("keydown",H),document.body.classList.add(s.modalOpen)}function U(){document.removeEventListener("keydown",H),document.body.classList.remove(s.modalOpen)}function H(t){t.key==="Escape"&&h()}function h(){m.classList.add(s.visuallyHidden),g.classList.remove(s.visuallyHidden),L.classList.add(s.visuallyHidden),U()}P.addEventListener("click",h);L.addEventListener("click",t=>{const e=g.getBoundingClientRect();e.top<=t.clientY&&t.clientY<=e.top+e.height&&e.left<=t.clientX&&t.clientX<=e.left+e.width||h(),t.stopImmediatePropagation()});function J(){const t=document.querySelector(n.openRatingModalButton);let e=0;t.addEventListener("click",i=>{m.classList.remove(s.visuallyHidden),g.classList.add(s.visuallyHidden),A(),a(),i.stopImmediatePropagation()}),document.querySelector(n.closeRatingModalButton).addEventListener("click",i=>{m.classList.add(s.visuallyHidden),g.classList.remove(s.visuallyHidden),d(m.querySelector("form")),i.stopImmediatePropagation()});function d(i){i.elements.email.value="",i.elements.comment.value="",i.elements.radio.forEach(l=>l.checked=!1),document.querySelector(n.addRatingValue).textContent="0",document.querySelectorAll(n.iconModalRatingStar).forEach(l=>l.classList.remove(s.gold))}function a(){document.querySelectorAll(n.addRatingRadioBtn).forEach(l=>{l.addEventListener("click",c=>{e=Number(c.currentTarget.value),document.querySelector(n.addRatingValue).textContent=e,document.querySelectorAll(n.iconModalRatingStar).forEach((f,v)=>{f.classList.toggle(s.gold,v<e)}),c.stopImmediatePropagation()})})}document.querySelector(n.ratingForm).addEventListener("submit",i=>{i.preventDefault();const l=i.target,c=l.elements.email.value,f=l.elements.comment.value;e?c?f?updateData(`exercises/${exerciseId}/rating`,{rate:e,email:c,review:f}).then(()=>{m.classList.add(s.visuallyHidden),d(l),g.classList.remove(s.visuallyHidden)}).catch(v=>{alert(`Error: ${v.message}`)}):alert("Leave a comment"):alert("Enter your email"):alert("Choose your rating"),i.stopImmediatePropagation()})}function Y(){document.querySelectorAll(n.openModalButtons).forEach(e=>{e.addEventListener("click",o=>{const d=o.currentTarget.value;w(d)})})}function q(){return JSON.parse(localStorage.getItem("favorites"))||[]}function j(t){const e=q();e.push(t),localStorage.setItem("favorites",JSON.stringify(e))}function G(t){const e=q(),o=e.indexOf(t);o!==-1&&(e.splice(o,1),localStorage.setItem("favorites",JSON.stringify(e)))}function K(t){const e=document.querySelector(n.ratingStars);e.innerHTML="",e.append(...X(5,t))}function X(t,e){const o=[];for(let d=0;d<t;d++){const a=Math.min(100,Math.max(0,(e-d)*100)),r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("width","18"),r.setAttribute("height","18"),r.setAttribute("class","icon icon-modal-star");const i=`gradient-${d}-${a}`;r.innerHTML=`
      <defs>
        <linearGradient id="${i}" x1="0%" y1="0%" x2="100%" y2="0%">
          <stop offset="${a}%" stop-color="var(--accent-color)" />
          <stop offset="${a}%" stop-color="var(--rating-color)" />
        </linearGradient>
      </defs>
      <use href="${C}#star" fill="url(#${i})"></use>
    `,o.push(r)}return o}Y();
//# sourceMappingURL=index.js.map
