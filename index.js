var C=t=>{throw TypeError(t)};var B=(t,e,n)=>e.has(t)||C("Cannot "+n);var h=(t,e,n)=>(B(t,e,"read from private field"),n?n.call(t):e.get(t)),S=(t,e,n)=>e.has(t)?C("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n);var M=(t,e,n)=>(B(t,e,"access private method"),n);/* empty css                      */import{a as $}from"./assets/vendor-CNNbG8jS.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();const F="/goit-js-finalproject-team-6/assets/sprites-7s4RqKzA.svg";var v,m,w,A;class k{constructor(){S(this,m);S(this,v,$.create({baseURL:"https://your-energy.b.goit.study/api/"}))}async exerciseInfo(e){return M(this,m,w).call(this,`exercises/${e}`)}async setExerciseRating({exerciseId:e,rate:n,email:o,review:a}){return M(this,m,A).call(this,`exercises/${e}/rating`,{rate:n,email:o,review:a})}}v=new WeakMap,m=new WeakSet,w=async function(e){return(await h(this,v).get(e)).data},A=async function(e,n){return(await h(this,v).patch(e,n)).data};const H=new k;function x(){return JSON.parse(localStorage.getItem("favorites"))||[]}function N(t){const e=x();e.push(t),localStorage.setItem("favorites",JSON.stringify(e))}function U(t){const e=x(),n=e.indexOf(t);n!==-1&&(e.splice(n,1),localStorage.setItem("favorites",JSON.stringify(e)))}const r={closeModalButton:"[data-modal-close]",modalContainer:"[data-modal]",exerciseModal:".modal",ratingModal:".add-rating-modal",addToFavoritesButton:".btn-modal-add-fav",imgModalExercise:".img-modal-exercise",titleModal:".title-modal",ratingValue:".rating-value",statsList:".stats-list",descText:".desc-text",btnFavText:".btn-fav-text",iconFavBtnUse:".icon-fav-btn-use",openRatingModalButton:"[data-add-rating-open]",closeRatingModalButton:"[data-add-rating-close]",ratingForm:".add-rating-form",addRatingValue:".add-rating-value",iconModalRatingStar:".icon-modal-rating-star",addRatingRadioBtn:".add-rating-radio-btn",openModalButtons:"[data-modal-open]",ratingStars:".rating-stars"},c={visuallyHidden:"visually-hidden",favAdded:"fav-added",modalOpen:"modal-open",gold:"gold"},V=document.querySelector(r.closeModalButton),b=document.querySelector(r.modalContainer),y=document.querySelector(r.exerciseModal),u=document.querySelector(r.ratingModal),P=document.querySelector(r.addToFavoritesButton);async function j(t){const e=await H.exerciseInfo(t);I(e),E(t),z(t),b.classList.toggle(c.visuallyHidden),_(),W(t)}function K(){document.querySelector(r.imgModalExercise).src="",document.querySelector(r.titleModal).textContent="",document.querySelector(r.ratingValue).textContent="0",document.querySelector(r.statsList).innerHTML="",document.querySelector(r.descText).textContent=""}function I(t){K(),document.querySelector(r.imgModalExercise).src=t.gifUrl,document.querySelector(r.titleModal).textContent=t.name.trim(),document.querySelector(r.descText).textContent=t.description.trim(),document.querySelector(r.ratingValue).textContent=t.rating,Y(t.rating),J(t)}function J(t){const e=document.querySelector(r.statsList);e.innerHTML="";let n="";t.target&&(n+=p("Target",t.target)),t.bodyPart&&(n+=p("BodyPart",t.bodyPart)),t.equipment&&(n+=p("Equipment",t.equipment)),t.popularity&&(n+=p("Popular",t.popularity)),t.burnedCalories&&(n+=p("Burned Calories",`${t.burnedCalories}/${t.time} min`)),e.insertAdjacentHTML("beforeend",n)}function p(t,e){return`<li class="stats-item">
    <p class="stats-title">${t}</p>
    <p class="stats-value">${e}</p>
  </li>`}function E(t){const e=x().includes(t);P.classList.toggle(c.favAdded,e),document.querySelector(r.btnFavText).textContent=e?"Remove from favorites":"Add to favorites",document.querySelector(r.iconFavBtnUse).setAttribute("href",`${F}#${e?"trash-bin":"heart"}`)}function z(t){P.addEventListener("click",e=>{const n=e.currentTarget;n.classList.toggle(c.favAdded),n.classList.contains(c.favAdded)?(N(t),E(t)):(U(t),E(t)),e.stopImmediatePropagation()})}function _(){document.addEventListener("keydown",O),document.body.classList.add(c.modalOpen)}function G(){document.removeEventListener("keydown",O),document.body.classList.remove(c.modalOpen)}function O(t){t.key==="Escape"&&q()}function q(){u.classList.add(c.visuallyHidden),y.classList.remove(c.visuallyHidden),b.classList.add(c.visuallyHidden),G()}V.addEventListener("click",q);b.addEventListener("click",t=>{T(t,y.getBoundingClientRect())||T(t,u.getBoundingClientRect())||q(),t.stopImmediatePropagation()});function T(t,e){return e.top<=t.clientY&&t.clientY<=e.top+e.height&&e.left<=t.clientX&&t.clientX<=e.left+e.width}function W(t){const e=document.querySelector(r.openRatingModalButton);let n=0;e.addEventListener("click",l=>{u.classList.remove(c.visuallyHidden),y.classList.add(c.visuallyHidden),_(),s(),l.stopImmediatePropagation()}),document.querySelector(r.closeRatingModalButton).addEventListener("click",l=>{u.classList.add(c.visuallyHidden),y.classList.remove(c.visuallyHidden),a(u.querySelector("form")),l.stopImmediatePropagation()});function a(l){l.elements.email.value="",l.elements.comment.value="",l.elements.radio.forEach(d=>d.checked=!1),document.querySelector(r.addRatingValue).textContent="0",document.querySelectorAll(r.iconModalRatingStar).forEach(d=>d.classList.remove(c.gold))}function s(){document.querySelectorAll(r.addRatingRadioBtn).forEach(d=>{d.addEventListener("click",g=>{n=Number(g.currentTarget.value),document.querySelector(r.addRatingValue).textContent=n,document.querySelectorAll(r.iconModalRatingStar).forEach((L,f)=>{L.classList.toggle(c.gold,f<n)}),g.stopImmediatePropagation()})})}document.querySelector(r.ratingForm).addEventListener("submit",async l=>{l.preventDefault();const d=l.target,g=d.elements.email.value,L=d.elements.comment.value;if(!n)alert("Choose your rating");else if(!g)alert("Enter your email");else if(!L)alert("Leave a comment");else try{const f=await H.setExerciseRating({exerciseId:t,rate:n,email:g,review:L});u.classList.add(c.visuallyHidden),a(d),y.classList.remove(c.visuallyHidden),I(f)}catch(f){alert(`Error: ${f.message}`)}l.stopImmediatePropagation()})}function X(){document.querySelectorAll(r.openModalButtons).forEach(e=>{e.addEventListener("click",n=>{const o=n.currentTarget.value;j(o)})})}function Y(t){const e=document.querySelector(r.ratingStars);e.innerHTML="",e.append(...Q(5,t))}function Q(t,e){const n=[];for(let o=0;o<t;o++){const a=Math.min(100,Math.max(0,(e-o)*100)),s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("width","18"),s.setAttribute("height","18"),s.setAttribute("class","icon icon-modal-star");const i=`gradient-${o}-${a}`;s.innerHTML=`
      <defs>
        <linearGradient id="${i}" x1="0%" y1="0%" x2="100%" y2="0%">
          <stop offset="${a}%" stop-color="var(--color-accent)" />
          <stop offset="${a}%" stop-color="var(--color-rating)" />
        </linearGradient>
      </defs>
      <use href="${F}#star" fill="url(#${i})"></use>
    `,n.push(s)}return n}X();async function R(t="Muscles",e=1,n=12){try{const o=t.replace(/%20/g," "),a=await $.get("https://your-energy.b.goit.study/api/filters",{params:{filter:o,page:e,limit:n}}),s=a.data.results,i=a.data.totalPages;Z(s),nt(i,t,n,e)}catch(o){console.error("Помилка при завантаженні даних:",o)}}function Z(t){const e=document.getElementById("exercises-container");e.innerHTML="",t.forEach(n=>{const o=document.createElement("div");o.classList.add("exercises__col"),o.innerHTML=`
      <div class="exercises__item">
        <img src="${n.imgURL}" alt="Опис зображення" />
        <div class="text-overlay">
          <h5>${n.name}</h5>
          <p>${n.filter}</p>
        </div>
      </div>
    `,o.addEventListener("click",async()=>{const a=n.filter,s=n.name,i=await tt(a,s,1);D(i.results)}),e.appendChild(o)})}function D(t){const e=document.getElementById("exercises-container");e.innerHTML="",t.forEach(n=>{const o=document.createElement("li");o.classList.add("exercise-item"),o.innerHTML=`
      <div class="exercise-details__item">
        <div class="exercise-header">
          <button type="button" class='btn-workout'>WORKOUT</button>
          <div class="exercise-rating">${n.rating||"Немає даних"} <span>⭐</span></div>
          <button type="button" class="btn-start">Start ➔</button>
        </div>
        <h3 class="exercise-name">${n.name}</h3>
        <div class="exercise-info">
          <p class="truncate-text"<strong class="exercise-info-title">Burned calories:</strong> ${n.burnedCalories}</p>
          <p class="truncate-text"><strong class="exercise-info-title">Body part:</strong> ${n.bodyPart}</p>
          <p class="truncate-text"><strong class="exercise-info-title">Target:</strong> ${n.target}</p>
        </div>
      </div>
    `,e.appendChild(o)})}async function tt(t,e,n=1){let o=t.toLowerCase().replace(/\s+/g,"");o.endsWith("ts")&&(o=o.slice(0,-1));const a=encodeURIComponent(e),s=`https://your-energy.b.goit.study/api/exercises?${o}=${a}&page=${n}&limit=10`;try{const i=await fetch(s);if(!i.ok)throw new Error("Помилка завантаження даних");return await i.json()}catch(i){return console.error("Помилка при запиті до API:",i),{results:[]}}}function et(){document.querySelectorAll(".exercises-filters ul li").forEach(e=>{e.addEventListener("click",()=>{const n=e.id;R(n),document.querySelectorAll(".exercises-filters__selected").forEach(o=>{o.classList.remove("exercises-filters__selected")}),e.classList.add("exercises-filters__selected")})})}function nt(t,e,n=12,o=1){const a=document.querySelector(".exercises-pagination ul");a.innerHTML="";for(let s=1;s<=t;s++){const i=document.createElement("li");i.textContent=s,s===o&&i.classList.add("exercises-pagination__current"),i.addEventListener("click",()=>{document.querySelectorAll(".exercises-pagination li").forEach(l=>{l.classList.remove("exercises-pagination__current")}),i.classList.add("exercises-pagination__current"),R(e,s,n)}),a.appendChild(i)}}R();et();
//# sourceMappingURL=index.js.map
